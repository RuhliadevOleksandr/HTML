CREATE DATABASE film_lib DEFAULT CHAR SET utf8;
USE film_lib;

CREATE TABLE director (
	director_id SMALLINT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
    
	name_ VARCHAR(50) NOT NULL UNIQUE KEY
)ENGINE=InnoDB;

CREATE TABLE studio (
	studio_id SMALLINT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
    
	name_ VARCHAR(20) NOT NULL UNIQUE KEY, 
	country VARCHAR(20) NOT NULL
)ENGINE=InnoDB;

CREATE TABLE film (
	film_id SMALLINT UNSIGNED AUTO_INCREMENT PRIMARY KEY, 
    
	title VARCHAR(20) NOT NULL UNIQUE KEY, 
	description_ VARCHAR(2000) NOT NULL,
    year_ YEAR NOT NULL,
	studio_id SMALLINT UNSIGNED,
	FOREIGN KEY (studio_id) REFERENCES studio(studio_id) ON DELETE CASCADE ON UPDATE CASCADE
)ENGINE=InnoDB;

CREATE TABLE film_director (
	film_director_id SMALLINT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
    
	director_id SMALLINT UNSIGNED NOT NULL,
	film_id SMALLINT UNSIGNED NOT NULL,
	FOREIGN KEY (director_id) REFERENCES director(director_id) ON DELETE CASCADE ON UPDATE CASCADE,
	FOREIGN KEY (film_id) REFERENCES film(film_id) ON DELETE CASCADE ON UPDATE CASCADE
)ENGINE=InnoDB;